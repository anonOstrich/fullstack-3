{"version":3,"sources":["services/PersonService.js","App.js","index.js"],"names":["baseUrl","PersonService","axios","get","then","response","data","newPerson","post","id","delete","concat","person","put","Filter","_ref","changeHandler","react_default","a","createElement","onChange","Persons","_ref2","contactInfo","filter","createDeletorForPerson","p","name","toLowerCase","includes","map","key","number","onClick","PersonForm","_ref3","nameValue","nameChangeFunction","numberValue","numberChangeFunction","submitFunction","value","type","MessageBox","_ref4","notificationInfo","message","isError","Fragment","messageStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNotificationInfo","useEffect","_useState5","_useState6","newName","setNewName","_useState7","_useState8","newNumber","setNewNumber","_useState9","_useState10","filterString","setFilterString","App_MessageBox","App_Filter","event","target","App_PersonForm","preventDefault","window","confirm","updatedPerson","objectSpread","find","catch","length","error","setTimeout","App_Persons","deletablePerson","ReactDOM","render","src_App","document","getElementById"],"mappings":"wMAEMA,EAAU,oCA2BDC,EAzBI,WACf,OAAOC,IAAMC,IAAIH,GACRI,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAuBxBL,EApBG,SAAAM,GACd,OAAOL,IAAMM,KAAKR,EAASO,GAClBH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAkBxBL,EAfM,SAAAQ,GACjB,OAAOP,IAAMQ,OAAN,GAAAC,OAAgBX,EAAhB,KAAAW,OAA2BF,IACjCL,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAahBL,EAVM,SAACW,GAClB,OAAOV,IACEW,IADF,GAAAF,OACSX,EADT,KAAAW,OACoBC,EAAOH,IAAMG,GAC/BR,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCnBjCQ,EAAS,SAAAC,GAAqB,IAAnBC,EAAmBD,EAAnBC,cACb,OACAC,EAAAC,EAAAC,cAAA,6BACeF,EAAAC,EAAAC,cAAA,SAAOC,SAAUJ,MAI9BK,EAAU,SAAAC,GAAqD,IAAlDC,EAAkDD,EAAlDC,YAAaC,EAAqCF,EAArCE,OAAQC,EAA6BH,EAA7BG,uBAKrC,OAJ+B,KAAXD,EACnBD,EACEA,EAAYC,OAAO,SAAAE,GAAC,OAAIA,EAAEC,KAAKC,cAAcC,SAASL,EAAOI,kBAE7CE,IAAI,SAAAJ,GAAC,OACxBT,EAAAC,EAAAC,cAAA,OAAKY,IAAKL,EAAEC,MAAZ,GAAAhB,OACSe,EAAEC,KADX,KAAAhB,OACmBe,EAAEM,QAChBf,EAAAC,EAAAC,cAAA,UAAQc,QAASR,EAAuBC,IAAxC,cAIFQ,EAAa,SAAAC,GAAwF,IAAtFC,EAAsFD,EAAtFC,UAAWC,EAA2EF,EAA3EE,mBAAoBC,EAAuDH,EAAvDG,YAAaC,EAA0CJ,EAA1CI,qBAAsBC,EAAoBL,EAApBK,eACnF,OACAvB,EAAAC,EAAAC,cAAA,YACAF,EAAAC,EAAAC,cAAA,oBACUF,EAAAC,EAAAC,cAAA,SAAOsB,MAAOL,EAAWhB,SAAUiB,KAE7CpB,EAAAC,EAAAC,cAAA,sBACYF,EAAAC,EAAAC,cAAA,SAAOsB,MAAOH,EAAalB,SAAUmB,KAEjDtB,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UAAQuB,KAAK,SAAST,QAASO,GAA/B,kBA6HFG,EAAa,SAAAC,GAAwB,IAAtBC,EAAsBD,EAAtBC,iBACXC,EAAUD,EAAiBC,QAC3BC,EAAUF,EAAiBE,QACjC,GAAe,OAAZD,EACC,OAAO7B,EAAAC,EAAAC,cAAAF,EAAAC,EAAA8B,SAAA,MAGX,IAAMC,EAAe,CACjBC,MAAOH,EAAU,MAAQ,QACzBI,WAAY,YACZC,SAAU,GACVC,YAAa,QACbC,aAAc,EACdC,QAAS,GACTC,aAAc,IAGlB,OACIvC,EAAAC,EAAAC,cAAA,OAAKsC,MAAOR,GACPH,IAOEY,EAjJH,WAAM,IAAAC,EAEgBC,mBAAS,IAFzBC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAEPK,EAFOH,EAAA,GAEEI,EAFFJ,EAAA,GAAAK,EAGkCN,mBAAS,CAACd,QAAS,KAAMC,SAAQ,IAHnEoB,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAGPrB,EAHOsB,EAAA,GAGWC,EAHXD,EAAA,GAMdE,oBAAU,WACNpE,IACCG,KAAK,SAAAE,GAAI,OAAI2D,EAAW3D,MAC1B,IATW,IAAAgE,EAWkBV,mBAAS,IAX3BW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAWNE,EAXMD,EAAA,GAWGE,EAXHF,EAAA,GAAAG,EAYqBd,mBAAS,IAZ9Be,EAAAb,OAAAC,EAAA,EAAAD,CAAAY,EAAA,GAYNE,EAZMD,EAAA,GAYKE,EAZLF,EAAA,GAAAG,EAa4BlB,mBAAS,IAbrCmB,EAAAjB,OAAAC,EAAA,EAAAD,CAAAgB,EAAA,GAaNE,EAbMD,EAAA,GAaQE,EAbRF,EAAA,GAqGd,OACA9D,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAC+D,EAAD,CAAYrC,iBAAkBA,IAC9B5B,EAAAC,EAAAC,cAACgE,EAAD,CAAQnE,cAvBe,SAACoE,GAAD,OAAWH,EAAgBG,EAAMC,OAAO5C,UAwB/DxB,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAACmE,EAAD,CACIlD,UAAWoC,EAASnC,mBA9BJ,SAAC+C,GACrBX,EAAWW,EAAMC,OAAO5C,QA8BpBH,YAAasC,EAAWrC,qBAnCN,SAAC6C,GACvBP,EAAaO,EAAMC,OAAO5C,QAmCtBD,eA/FkB,SAAC4C,GAKvB,GAJAA,EAAMG,iBAIHvB,EAAQlC,IAAI,SAAAJ,GAAC,OAAIA,EAAEC,OAAME,SAAS2C,IACjC,GAAGgB,OAAOC,QAAP,cAAA9E,OAA0B6D,EAA1B,0DAA0F,CACzF,IAAMkB,EAAa5B,OAAA6B,EAAA,EAAA7B,CAAA,GAAOE,EAAQ4B,KAAK,SAAAlE,GAAC,OAAIA,EAAEC,OAAS6C,IAApC,CAA8CxC,OAAQ4C,IACzE3E,EAA2ByF,GAC1BtF,KAAK,SAAAE,GAAI,OAAI2D,EAAWD,EAAQlC,IAAI,SAAAJ,GAAC,OAAIA,EAAEjB,KAAOH,EAAKG,GAAKiB,EAAIpB,OAChEF,KAAK,SAAAE,GACF8D,EAAoB,CAChBtB,QAAO,+BAAAnC,OAA2B6D,EAA3B,kBACPzB,SAAS,MAGhB8C,MAAM,SAAAvF,GACH8D,EAAoB,CAChBtB,QAAO,cAAAnC,OAAa6D,EAAb,oBACPzB,SAAS,IAEbkB,EAAWD,EAAQxC,OAAO,SAAAE,GAAC,OAAIA,EAAEC,OAAS6C,YAM/C,CAEP,IAAMjE,EAAY,CACdoB,KAAM6C,EACNxC,OAAQ4C,EACRnE,GAAIuD,EAAQ8B,OAAS,GAEzB7F,EAAwBM,GACvBH,KAAK,SAAAsB,GACFuC,EAAWD,EAAQrD,OAAOe,IAC1B0C,EAAoB,CAChBtB,QAAO,gBAAAnC,OAAe6D,GACtBzB,SAAS,MAGhB8C,MAAM,SAAAE,GACH3B,EAAoB,CAChBtB,QAASiD,EAAM1F,SAASC,KAAKyF,MAC7BhD,SAAS,MAMjB0B,EAAW,IACXI,EAAa,IAGbmB,WAAW,WAAO5B,EAAoB,CAACtB,QAAS,KAAMC,SAAS,KAAU,QA2CzE9B,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAC8E,EAAD,CAAS1E,YAAayC,EACtBxC,OAAQwD,EAAcvD,uBA/BK,SAACyE,GAAD,OAAqB,WAChD,GAAGV,OAAOC,QAAP,gBAAA9E,OAA+BuF,EAAgBvE,KAA/C,MAAwD,CACvD,IAAMlB,EAAKyF,EAAgBzF,GAC3BR,EAA2BQ,GAC1BL,KAAK,SAAAC,GACF+D,EAAoB,CAACtB,QAAO,cAAAnC,OAAauF,EAAgBvE,KAA7B,4BAA6DoB,SAAS,MACnG8C,MAAM,SAAAxF,GACL+D,EAAoB,CAACtB,QAAO,cAAAnC,OAAauF,EAAgBvE,KAA7B,oBAAqDoB,SAAS,MAE9FkB,EAAWD,EAAQxC,OAAO,SAAAE,GAAC,OAAIA,EAAEjB,KAAOA,KAE5CuF,WAAW,WAAO5B,EAAoB,CAClCtB,QAAS,KACTC,SAAS,KACR,WCnIboD,IAASC,OAAOnF,EAAAC,EAAAC,cAACkF,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.de466b76.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getPersons = () => {\r\n    return axios.get(baseUrl)\r\n            .then(response => response.data); \r\n}\r\n\r\nconst addPerson = newPerson => {\r\n    return axios.post(baseUrl, newPerson)\r\n            .then(response => response.data); \r\n}\r\n\r\nconst deletePerson = id => {\r\n    return axios.delete(`${baseUrl}/${id}`)\r\n    .then(response => response.data); \r\n}\r\n\r\nconst updatePerson = (person) => {\r\n    return axios\r\n            .put(`${baseUrl}/${person.id}`, person)\r\n            .then(response => response.data); \r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport default { getPersons, addPerson, deletePerson, updatePerson }; ","import React, {useState, useEffect} from 'react'\r\nimport PersonService from './services/PersonService'; \r\n\r\nconst Filter = ({changeHandler}) => {\r\n    return (\r\n    <div>\r\n    rajaa tuloksia <input onChange={changeHandler} />\r\n    </div>)\r\n}\r\n\r\nconst Persons = ({ contactInfo, filter, createDeletorForPerson }) => {\r\n    const potentials = filter === '' ?\r\n    contactInfo \r\n    : contactInfo.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()));\r\n    \r\n   return  potentials.map(p => (\r\n   <div key={p.name}>\r\n        {`${p.name} ${p.number}`}\r\n        <button onClick={createDeletorForPerson(p)}>poista</button>\r\n   </div>))\r\n}\r\n\r\nconst PersonForm = ({nameValue, nameChangeFunction, numberValue, numberChangeFunction, submitFunction}) => {\r\n    return(\r\n    <form>\r\n    <div>\r\n        nimi: <input value={nameValue} onChange={nameChangeFunction} />\r\n    </div>\r\n    <div>\r\n        numero: <input value={numberValue} onChange={numberChangeFunction} />\r\n    </div>\r\n    <div>\r\n        <button type=\"submit\" onClick={submitFunction}>lisää</button>\r\n    </div>\r\n</form>)\r\n\r\n}\r\n\r\nconst App = () => {\r\n    \r\n    const [persons, setPersons] = useState([]);\r\n    const [notificationInfo, setNotificationInfo] = useState({message: null, isError:false}); \r\n    \r\n\r\n    useEffect(() => {\r\n        PersonService.getPersons()\r\n        .then(data => setPersons(data))\r\n    }, []);\r\n\r\n    const [ newName, setNewName ] = useState('');\r\n    const [ newNumber, setNewNumber] = useState(''); \r\n    const [ filterString, setFilterString ] = useState(''); \r\n\r\n    const addNewInformation = (event) => {\r\n        event.preventDefault(); \r\n\r\n\r\n\r\n        if(persons.map(p => p.name).includes(newName)){\r\n            if(window.confirm(`Henkilö ${newName} on jo luettelossa, korvataanko vanha numero uudella?`)){\r\n                const updatedPerson = {...persons.find(p => p.name === newName), number: newNumber}; \r\n                PersonService.updatePerson(updatedPerson)\r\n                .then(data => setPersons(persons.map(p => p.id !== data.id ? p : data)))\r\n                .then(data => {\r\n                    setNotificationInfo({\r\n                        message: `Päivitettiin henkilön ${newName} puhelinnumero`, \r\n                        isError: false \r\n                    }); \r\n                })\r\n                .catch(data => {\r\n                    setNotificationInfo({\r\n                        message: `Henkilö ${newName} on jo poistettu`, \r\n                        isError: true \r\n                    }); \r\n                    setPersons(persons.filter(p => p.name !== newName)); \r\n\r\n                }); \r\n\r\n            }\r\n\r\n        } else {\r\n            \r\n        const newPerson = {\r\n            name: newName, \r\n            number: newNumber, \r\n            id: persons.length + 1\r\n        }\r\n        PersonService.addPerson(newPerson)\r\n        .then(p => {\r\n            setPersons(persons.concat(p))\r\n            setNotificationInfo({\r\n                message: `Lisättiin ${newName}`, \r\n                isError: false\r\n            });\r\n        })\r\n        .catch(error => {\r\n            setNotificationInfo({\r\n                message: error.response.data.error, \r\n                isError: true\r\n                }\r\n            )\r\n        });  \r\n\r\n\r\n        setNewName(''); \r\n        setNewNumber(''); \r\n        }\r\n\r\n        setTimeout(() => {setNotificationInfo({message: null, isError: false})}, 4000); \r\n    }\r\n\r\n\r\n    const changeNumberValue = (event) => {\r\n        setNewNumber(event.target.value); \r\n    }\r\n\r\n    const changeNameValue = (event) => {\r\n        setNewName(event.target.value); \r\n    }\r\n\r\n    const changeFilterString = (event) => setFilterString(event.target.value); \r\n\r\n    const createDeletorForPerson = (deletablePerson) => () => {\r\n        if(window.confirm(`Poistetaanko ${deletablePerson.name}?`)){\r\n            const id = deletablePerson.id; \r\n            PersonService.deletePerson(id)\r\n            .then(response => {\r\n                setNotificationInfo({message: `Henkilö ${deletablePerson.name} poistettu onnistuneesti`, isError: false})\r\n            }).catch(response => {\r\n                setNotificationInfo({message: `Henkilö ${deletablePerson.name} on jo poistettu`, isError: true})\r\n            }); \r\n            setPersons(persons.filter(p => p.id !== id)); \r\n        }\r\n        setTimeout(() => {setNotificationInfo({\r\n            message: null, \r\n            isError: false\r\n        })}, 4000); \r\n    }\r\n\r\n    return (\r\n    <div>\r\n        <h2>Puhelinluettelo</h2>\r\n        <MessageBox notificationInfo={notificationInfo}/>\r\n        <Filter changeHandler={changeFilterString} />\r\n        <h3>Lisää uusi</h3>\r\n        <PersonForm\r\n            nameValue={newName} nameChangeFunction={changeNameValue}\r\n            numberValue={newNumber} numberChangeFunction={changeNumberValue}\r\n            submitFunction={addNewInformation}\r\n         />\r\n\r\n        <h2>Numerot</h2>\r\n        <Persons contactInfo={persons} \r\n        filter={filterString} createDeletorForPerson={createDeletorForPerson}/>   \r\n    </div>)\r\n}\r\n\r\nconst MessageBox = ({notificationInfo}) => {\r\n    const message = notificationInfo.message; \r\n    const isError = notificationInfo.isError; \r\n    if(message === null){\r\n        return <></>; \r\n    }\r\n    \r\n    const messageStyle = {\r\n        color: isError ? 'red' : 'green', \r\n        background: 'lightgrey', \r\n        fontSize: 20, \r\n        borderStyle: 'solid', \r\n        borderRadius: 5, \r\n        padding: 10, \r\n        marginBottom: 10 \r\n    }\r\n\r\n    return(\r\n        <div style={messageStyle}>\r\n            {message}\r\n        </div>\r\n    ); \r\n}\r\n\r\n\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n\n\n"],"sourceRoot":""}